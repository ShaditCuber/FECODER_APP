{% extends 'FECODER_APP/padre.html' %}
    
    {% load static %}
    
    {% block titulo %}
    <h1 class="fw-bolder">Crear un nuevo post</h1>
    <p class="lead mb-0">Publica tu contenido en el Blog</p>
    {% endblock %}
    {% block fotoUser %}
    
    {% if avatar %}
        <img src="{{avatar}}" width="40px">
    {% else  %}
        <img src="/media/default.png" width="40px">
    {% endif %}
        
{% endblock fotoUser %}
    {% block contenido %}

    <div class="container"">
        <div class="row mt-5 pt-3">
            <div class="col-md offset-md-3">
                <div class="card my-3 shadow">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">   
                               
                                <img class="img-thumbnail" src="{{ img }}" alt="profile-img">
                            </div>
                            <div class="col-md-8">
                                <small>{{ post.fecha_post }} |  {{post.usuario_post}} </small>
                                
                                <br><br>
                                {% if request.user.username == 'admin' %}
                                <span><a class="eliminar btn btn-danger float-right btn-sm"
                                        href="{% url 'borrarPost' post.id %}">Eliminar</a></span>
                                <span><a class="btn btn-primary mx-2 float-right btn-sm"
                                          href="{% url 'editarPost' post.id %}"> Editar</a></span>
                                
                                {% if post.estatus_post %}
                                <span><a class="btn btn-danger mx-2 float-right btn-sm"
                                    href="{% url 'desactivarPost' post.id %}">Desactivar</a></span>
                                    
                                {% elif not post.estatus_post  %}
                                <span><a class="btn btn-success mx-2 float-right btn-sm"
                                    href="{% url 'desactivarPost' post.id %}">Activar</a></span>
                                
                                {% endif %}
                                    
                                
                                {% elif post.usuario_post == request.user%}
                                    
                                    <span><a class="eliminar btn btn-danger float-right btn-sm"
                                            href="{% url 'borrarPost' post.id %}"> Eliminar</a></span>
                                    <span><a class="open-incident btn btn-primary mx-2 float-right btn-sm"
                                            href="{% url 'editarPost' post.id %}" data-popup-url="{%url 'editarPost' post.id %}"> Editar</a></span>
                                    
                                 {% if post.estatus_post %}
                                <span><a class="btn btn-danger mx-2 float-right btn-sm"
                                    href="{% url 'desactivarPost' post.id %}">Desactivar</a></span>
                                    
                                {% elif not post.estatus_post  %}
                                <span><a class="btn btn-success mx-2 float-right btn-sm"
                                    href="{% url 'desactivarPost' post.id %}">Activar</a></span>
                                
                                {% endif %}

                                {% endif %}
                                <hr>
                                <h2>{{ post.titulo_post }}</h2>
                                <h4>{{ post.subtitulo_post }}</h4>
                                <p>
                                    {{ post.contenido_post|safe }}
                                </p>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
            
        </div>
        
    </div>

        
    {% endblock contenido %}
    {% block extraJS %}
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $('.eliminar').click(function(e){
          e.preventDefault();
          Swal.fire({
          title: '¿Estás seguro?',
          text: "No podrás revertir esto!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          confirmButtonText: 'Si, eliminarlo!',
          cancelButtonText : 'Cancelar'
          
          }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "{% url 'borrarPost' post.id %}";
          }
          })
        })
    </script>
    {% endblock extraJS %}
